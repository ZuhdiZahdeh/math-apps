<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>حيلة غاوس – تزاوج الأعداد (سُلّم المكعبات)</title>
  <!-- فافكون من جذر المستودع -->
  <link rel="icon" href="../../assets/favicon.ico">
  <link rel="stylesheet" href="gauss.css">
</head>
<body>
  <header>
    <div class="topbar">
      <a class="btn ghost small" href="../../index.html" title="الرجوع للفهرس">↩︎ الرجوع للفهرس</a>
      <h1>حيلة غاوس – تجميع (تزاوج) الأعداد بصريًا</h1>
    </div>
    <p>نُنشئ سُلّمًا من المكعبات من 1 إلى <b id="nLabel">20</b>، ثم نُكمّله بمكعبات مكافئة لتكوين مستطيل أبعاده
      <span id="dimsLabel">20 × 21</span> ليتضح أن <span class="eq">2S = n(n+1)</span> ثم
      <span class="eq">S = n(n+1)/2</span>.
    </p>
  </header>

  <div class="shell">
    <div class="panel" role="region" aria-label="لوح التحكم">
      <label for="n">عدد الدرجات (n): <b id="nVal">20</b></label>
      <input id="n" type="range" min="1" max="30" step="1" value="20" aria-label="عدد الدرجات" />
      <label for="speed">السرعة:</label>
      <select id="speed" aria-label="سرعة الأنيميشن">
        <option value="800">بطيء</option>
        <option value="600" selected>متوسط</option>
        <option value="350">سريع</option>
      </select>
      <button class="btn primary" id="play">تشغيل التزاوج</button>
      <button class="btn ghost" id="step">خطوة</button>
      <button class="btn ghost" id="reset">إعادة الضبط</button>

      <div class="zoomGroup" role="group" aria-label="التحكم بالتكبير">
        <button class="btn ghost small" id="zoomOut" title="تصغير (−)">تصغير −</button>
        <span id="zoomVal" class="hint" style="min-width:52px;display:inline-block;text-align:center">100%</span>
        <button class="btn ghost small" id="zoomIn" title="تكبير (+)">تكبير +</button>
        <button class="btn ghost small" id="zoomReset" title="افتراضي">افتراضي</button>
      </div>
      <span class="hint">نصيحة: عدّل n ثم اضغط تشغيل. يمكنك المشاهدة خطوة بخطوة أيضًا.</span>
    </div>

    <div class="arena" id="arena">
      <div class="grid" id="grid" aria-live="polite"></div>

      <!-- طبقة SVG للأسهم الإيضاحية (تظهر بعد الاكتمال) -->
      <svg id="guides" class="guides" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <marker id="arrowHead" markerWidth="8" markerHeight="8" refX="6" refY="4" orient="auto">
            <path d="M0,0 L8,4 L0,8 Z" fill="currentColor"></path>
          </marker>
        </defs>
        <line id="hLine" x1="0" y1="0" x2="0" y2="0" marker-start="url(#arrowHead)" marker-end="url(#arrowHead)"/>
        <line id="vLine" x1="0" y1="0" x2="0" y2="0" marker-start="url(#arrowHead)" marker-end="url(#arrowHead)"/>
        <text id="hText" x="0" y="0">n+1</text>
        <text id="vText" x="0" y="0" transform="rotate(-90 0,0)">n</text>
      </svg>

      <div class="legend" aria-hidden="true">
        <span class="k"><span class="pill" style="background:linear-gradient(180deg,#3b82f6,#1e40af)"></span> السُلّم الأصلي (A)</span>
        <span class="k"><span class="pill" style="background:linear-gradient(180deg,#34d399,#065f46)"></span> المكمل (B) لإكمال المستطيل</span>
      </div>

      <div class="formula" id="formula">
        <div>2S = n(n+1) ← لأن سُلّمين متكاملين يشكّلان مستطيلًا بعدده <span id="rectCells">420</span> مكعبًا.</div>
        <div>إذن S = n(n+1)/2 = <b id="sum">210</b> مكعّبًا.</div>
      </div>

      <!-- لوحة الشرح بعد الاكتمال -->
      <div class="postExplain" id="postExplain" role="status" aria-live="polite">
        <div class="card">
          <h3>الآن أصبح الشكل <span style="color:var(--accent);font-weight:800">مُستطيلاً</span></h3>
          <p>الأبعاد: <b><span id="dimA">20</span> × <span id="dimB">21</span></b>.</p>
          <p>مساحة المستطيل = الطول × العرض = <b id="areaVal">420</b> مكعبًا، وتمثّل عدد المكعبات داخل المستطيل، أي مكعبات السُلّمين معًا (<b>2S</b>).</p>
          <p>لكننا نريد مكعبات <b>سُلّم واحد فقط</b> ⇒ الجواب النهائي هو <b>نصف</b> هذا العدد:
            <span class="eq">S = n(n+1)/2 = <span id="sumVal">210</span></span>.
          </p>
          <button class="btn ghost small" id="dismiss">إخفاء الشرح</button>
        </div>
      </div>
    </div>

    <div class="footer">صُمِّم للشرح الصفي لمرحلة الصف الخامس–السابع. يمكنك تعديل عدد الدرجات والسرعة، وتشغيل الأنيميشن خطوة بخطوة.</div>
  </div>

  <script defer src="gauss.js"></script>
</body>
</html>


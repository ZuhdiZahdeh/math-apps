:root{
  --cell: 28px;
  --gap: 6px;
  --bg: #0b1220;
  --panel: #0f172a;
  --text: #e2e8f0;
  --muted: #94a3b8;
  --accent: #f59e0b;
  --brandW: clamp(52px, 6vw, 84px);
}

*{ box-sizing:border-box }
html{ font-size:16px }
body{
  margin:0;
  font-family: system-ui, "Tajawal", "Noto Kufi Arabic", Arial, Helvetica, sans-serif;
  background: linear-gradient(120deg,#0a0f1d,#111827);
  color: var(--text);
}
.shell{ max-width:1100px; margin:0 auto; padding:12px 16px 32px }

/* رأس */
header{ padding:18px 20px 8px; line-height:1.5 }
header .topbar{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }
header h1{ margin:0; font-size:1.9rem; font-weight:800 }
header p{ margin:.35rem 0 0; color:var(--muted); font-size:1.05rem }

/* بطاقات معلومات */
.info{
  display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap:12px; margin:14px 0;
}
.card{
  background:var(--panel); border:1px solid #1e293b; border-radius:16px;
  padding:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.25);
}
.card h3{ margin:.25rem 0 .5rem; font-size:1.1rem }
.card summary{ cursor:pointer; user-select:none; font-weight:700 }
.card .story{ margin-top:.5rem; background:#0b1220; border:1px solid #1f2937; border-radius:12px; padding:.75rem }

/* لوحة التحكم */
.panel{
  background:var(--panel);
  border:1px solid #1e293b;
  border-radius:16px;
  padding:14px;
  display:flex; flex-wrap:wrap; align-items:center; gap:12px;
  box-shadow:0 10px 30px rgba(0,0,0,.25);
}
.panel label{ color:var(--muted); font-size:1rem }
.panel input[type=range]{ width:220px; accent-color:#22c55e }
.zoomGroup{ display:inline-flex; align-items:center; gap:8px; margin-inline-start:auto; flex-wrap:wrap }

/* أزرار */
.btn{
  --btnA:#1f2937; --btnB:#111827;
  appearance:none; cursor:pointer;
  padding:10px 14px; border-radius:14px;
  font-weight:800; letter-spacing:.2px; color:#fff;
  background:linear-gradient(180deg,var(--btnA),var(--btnB));
  border:2px solid rgba(0,0,0,.7);
  box-shadow:0 6px 14px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.08);
  transform:translateY(0);
  transition: transform .12s, box-shadow .2s, filter .15s, background .3s;
}
.btn:hover{
  transform:translateY(-2px);
  box-shadow:0 10px 18px rgba(0,0,0,.28), 0 0 0 3px #ffffff30;
  filter:saturate(1.05) brightness(1.05);
}
.btn:active{ transform:translateY(0) }
.btn:focus-visible{ outline:none; box-shadow:0 0 0 4px #fff3, 0 0 0 6px #60a5fa }
.btn.small{ padding:8px 12px; border-radius:12px; font-size:.95rem }
#resetBtn{ --btnA:#f59e0b; --btnB:#ef4444 }
#zoomIn, #zoomOut, #zoomReset{ --btnA:#a78bfa; --btnB:#6d28d9 }

/* ساحة العرض */
.arena{
  position:relative; margin:18px auto 6px; padding:18px;
  border:1px solid #1e293b; border-radius:18px;
  background:
    radial-gradient(1200px 400px at 50% -10%, rgba(59,130,246,.18), rgba(16,185,129,.12) 30%, rgba(0,0,0,0) 70%),
    #0b1220;
  box-shadow: inset 0 1px 0 rgba(0,0,0,.25);
}
#stage{ transform-origin:50% 0 }

/* الشبكة */
.grid{
  display:grid;
  grid-auto-rows: var(--cell);
  gap: var(--gap);
  min-height: calc(8 * var(--cell) + 7 * var(--gap));
  padding:18px; border-radius:14px;
  background:
    radial-gradient(120% 120% at 15% 10%, rgba(255,255,255,.08), rgba(255,255,255,.02)),
    rgba(0,0,0,.06);
}
.cell{
  position:relative; width:var(--cell); height:var(--cell); border-radius:8px;
  box-shadow:
    0 4px 10px rgba(0,0,0,.35),
    inset 2px 2px 3px rgba(255,255,255,.12),
    inset -4px -4px 8px rgba(0,0,0,.35);
  background:
    radial-gradient(120% 100% at 20% 18%, #93c5fd, transparent 55%),
    linear-gradient(145deg, #3b82f6 10%, #3b82f6 50%, #1e40af 92%);
}
.cell.areaHi{
  background:
    radial-gradient(120% 100% at 20% 18%, #fde68a, transparent 55%),
    linear-gradient(145deg, #fbbf24 10%, #f59e0b 90%);
}
.cell.periHi{
  background:
    radial-gradient(120% 100% at 20% 18%, #fecaca, transparent 55%),
    linear-gradient(145deg, #f87171 10%, #ef4444 90%);
}

/* أدلة الطول/العرض (SVG) */
.guides{
  position:absolute; inset:18px;
  width:calc(100% - 36px); height:calc(100% - 36px);
  pointer-events:none; opacity:.90;
}
.guides line{
  stroke: var(--accent);
  stroke-width: var(--gStroke, 0.8);
  vector-effect: non-scaling-stroke;
}
.guides text{
  font: 700 var(--gFont, 11px) system-ui, "Tajawal", sans-serif;
  fill: #e5e7eb; opacity: .65; letter-spacing: .3px;
}

/* لوحة القيم */
.metrics{
  margin:12px 0;
  background:var(--panel); border:1px solid #1e293b; border-radius:16px;
  padding:12px 14px; line-height:1.9;
}
.metrics b{ color:#fff }
.metrics .row{ display:flex; gap:12px; flex-wrap:wrap }
.metrics .tag{ display:inline-block; padding:.1rem .5rem; border-radius:999px; background:#1f2937; border:1px solid #374151; color:#e5e7eb; font-weight:700 }

/* الشعار */
.brand-logo{
  position:fixed; left:14px; top:14px;
  z-index:50; display:block; line-height:0; pointer-events:auto;
}
.brand-logo img{
  width:var(--brandW); height:auto; aspect-ratio:1/1; object-fit:contain;
  border-radius:50%; box-shadow:0 6px 18px rgba(0,0,0,.25);
  transition: transform .2s ease, filter .2s ease;
}
.brand-logo:hover img{ transform:scale(1.04); filter:brightness(1.06) }

/* استجابة */
@media (max-width:900px){ .info{ grid-template-columns:1fr } }
@media (max-width:640px){
  :root{ --cell:22px; --gap:5px }
  .panel{ gap:8px }
  .panel input[type=range]{ width:150px }
}
@media print{ .brand-logo{ display:none !important } }
